<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>聊天对话</title>
<meta name="keywords" content=""/>
<meta name="description" content=""/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
<meta name="format-detection" content="telephone=no">
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE10" /> 
<link type="text/css" rel="stylesheet" href="../css/common.css"/>
<link type="text/css" rel="stylesheet" href="../css/swiper.min.css"/>
<link type="text/css" rel="stylesheet" href="../css/talk.css"/>

</head>
<body>
	<header class="header">
      <div class="fl icon-back">朋友</div>
      <div class="flexitem">
          林微音
      </div>
      <div class="fr icon-my"></div>  
    </header>
	<div class="container">	
		<ul class="talklist">
			<li class="visitor">
            <div class="gray-time"><span>2016年9月1日18:29</span></div>
				<div class="flexbox">
				<div class="line-media">
					<img src="../images/1.jpg" alt=""> 
				</div>
				<div class="flexitem">
					<div class="talk-content notissued"><i data-face="[微笑]" class="face_1 face icon_1"></i>工具库</div>
				</div>
				</div>		
			</li>
			<li class="mytalk">
				<div class="flexbox">
				<div class="flexitem">
					<div class="talk-content">jQuery 是一个高效、精简并且功能丰富的 JavaScript 工具库。它提供的 API 易于使用且兼容众多浏览器，这让诸如 HTML 文档遍历和操作、事件处理、动画和 Ajax 操作更加简单。如果你是一个 jQuery 新手，我们建议你先到jQuery 学习中心历练历练。</div>
				</div>
				<div class="line-media">
					<img src="../images/2.jpg" alt=""> 
				</div>
				</div>		
			</li>
			<li class="visitor">
				<div class="flexbox">
				<div class="line-media">
					<img src="../images/1.jpg" alt=""> 
				</div>
				<div class="flexitem">
					<div class="talk-content">春风拂面，绿草依依，柳絮纷飞，燕儿呢喃，蛙儿低语，小桥旁，碧水流淌，微风徐徐，轻舞飞扬，吹过脸庞，花儿绽放，甜美骄艳，盈盈笑靥，莺歌燕舞，蝶舞蜂鸣，诉说着诗意，含蓄的柳丝，饱含柔情几缕，倾泻着对春天深深的依恋。</div>
				</div>
				</div>		
			</li>
			<li class="mytalk">
				<div class="flexbox">
				<div class="flexitem">
					<div class="talk-content">人间四月天，清新而又婉约，是人们心灵绽放的春天，是爱，是暖，是希望，守望四月天，给生命一份安暖，将希望播种人间，聆听花开的声音，感受生命的色彩，让心海溢满花的馨香，芬芳流年的沧桑。</div>
				</div>
				<div class="line-media">
					<img src="../images/2.jpg" alt=""> 
				</div>
				</div>		
			</li>
			<li class="visitor">
            <div class="gray-time"><span>18:29</span></div>
				<div class="flexbox">
				<div class="line-media">
					<img src="../images/1.jpg" alt=""> 
				</div>
				<div class="flexitem">
					<div class="talk-content"><img src="../images/muwu.jpg" alt=""> </div>
				</div>
				</div>		
			</li>
			<li class="mytalk">
				<div class="flexbox">
				<div class="flexitem">
					<div class="talk-content">jQuery 是一个高效、精简并且功能丰富的 JavaScript 工具库。它提供的 API 易于使用且兼容众多浏览器，这让诸如 HTML 文档遍历和操作、事件处理、动画和 Ajax 操作更加简单。如果你是一个 jQuery 新手，我们建议你先到jQuery 学习中心历练历练。</div>
				</div>
				<div class="line-media">
					<img src="../images/2.jpg" alt=""> 
				</div>
				</div>		
			</li>
			<li class="visitor">
				<div class="flexbox">
				<div class="line-media">
					<img src="../images/1.jpg" alt=""> 
				</div>
				<div class="flexitem">
					<div class="talk-content">
                    <i data-face="[微笑]" class="face_1 face icon_1"></i>
                    <i data-face="[嘻嘻]" class="face_1 face icon_2"></i>
                    <i data-face="[哈哈]" class="face_1 face icon_3"></i>
                     </div>
				</div>
				</div>		
			</li>
			<li class="mytalk">
				<div class="flexbox">
				<div class="flexitem">
					<div class="talk-content">好的</div>
				</div>
				<div class="line-media">
					<img src="../images/2.jpg" alt=""> 
				</div>
				</div>		
			</li>			<li class="mytalk">
				<div class="flexbox">
				<div class="flexitem">
					<div class="talk-content">人间四月天，清新而又婉约，是人们心灵绽放的春天，是爱，是暖，是希望，守望四月天，给生命一份安暖，将希望播种人间，聆听花开的声音，感受生命的色彩，让心海溢满花的馨香，芬芳流年的沧桑。</div>
				</div>
				<div class="line-media">
					<img src="../images/2.jpg" alt=""> 
				</div>
				</div>		
			</li>
		</ul>
		<footer class="talk-footer">
        	<div class="flexbox plr">
            	<i class="icon-soundlight"></i>
                <div class="flexitem talk-input" contenteditable></div>
                <i class="icon-emojilight"></i>
                <i class="icon-roundaddlight"></i>
            </div>
            
            <div class="swiper-container pop-talk">
                <div class="swiper-wrapper">
                    <div class="swiper-slide">
                        <i data-face="→_→" class="face_1 face icon_0"></i>
                        <i data-face="[微笑]" class="face_1 face icon_1"></i>
                        <i data-face="[嘻嘻]" class="face_1 face icon_2"></i>
                        <i data-face="[哈哈]" class="face_1 face icon_3"></i>
                        <i data-face="[爱你]" class="face_1 face icon_4"></i>
                        <i data-face="[挖鼻]" class="face_1 face icon_5"></i>
                        <i data-face="[吃惊]" class="face_1 face icon_6"></i>
                        <i data-face="[晕]" class="face_1 face icon_7"></i>
                        <i data-face="[泪]" class="face_1 face icon_8"></i>
                        <i data-face="[馋嘴]" class="face_1 face icon_9"></i>
                        <i data-face="[抓狂]" class="face_1 face icon_10"></i>
                        <i data-face="[哼]" class="face_1 face icon_11"></i>
                        <i data-face="[可爱]" class="face_1 face icon_12"></i>
                        <i data-face="[怒]" class="face_1 face icon_13"></i>
                        <i data-face="[汗]" class="face_1 face icon_14"></i>
                        <i data-face="[害羞]" class="face_1 face icon_15"></i>
                        <i data-face="[困]" class="face_1 face icon_16"></i>
                        <i data-face="[钱]" class="face_1 face icon_17"></i>
                        <i data-face="[偷笑]" class="face_1 face icon_18"></i>
                        <i data-face="[笑cry]" class="face_1 face icon_19"></i>
                        <i data-face="[doge]" class="face_1 face icon_20"></i>
                        <i data-face="[喵喵]" class="face_1 face icon_21"></i>
                        <i data-face="[酷]" class="face_1 face icon_22"></i>
                        <i data-face="[衰]" class="face_1 face icon_23"></i>
                        <i data-face="[闭嘴]" class="face_1 face icon_24"></i>
                        <i data-face="[鄙视]" class="face_1 face icon_25"></i>
                        <i data-face="[色]" class="face_1 face icon_26"></i>
                        <i data-face="[鼓掌]" class="face_1 face icon_27"></i>
                    </div>
                    <div class="swiper-slide">
                        <i data-face="[悲伤]" class="face_2 face icon_0"></i>
                        <i data-face="[思考]" class="face_2 face icon_1"></i>
                        <i data-face="[生病]" class="face_2 face icon_2"></i>
                        <i data-face="[亲亲]" class="face_2 face icon_3"></i>
                        <i data-face="[怒骂]" class="face_2 face icon_4"></i>
                        <i data-face="[太开心]" class="face_2 face icon_5"></i>
                        <i data-face="[白眼]" class="face_2 face icon_6"></i>
                        <i data-face="[右哼哼]" class="face_2 face icon_7"></i>
                        <i data-face="[左哼哼]" class="face_2 face icon_8"></i>
                        <i data-face="[嘘]" class="face_2 face icon_9"></i>
                        <i data-face="[委屈]" class="face_2 face icon_10"></i>
                        <i data-face="[吐]" class="face_2 face icon_11"></i>
                        <i data-face="[可怜]" class="face_2 face icon_12"></i>
                        <i data-face="[睡]" class="face_2 face icon_13"></i>
                        <i data-face="[挤眼]" class="face_2 face icon_14"></i>
                        <i data-face="[失望]" class="face_2 face icon_15"></i>
                        <i data-face="[顶]" class="face_2 face icon_16"></i>
                        <i data-face="[疑问]" class="face_2 face icon_17"></i>
                        <i data-face="[困]" class="face_2 face icon_18"></i>
                        <i data-face="[感冒]" class="face_2 face icon_19"></i>
                        <i data-face="[拜拜]" class="face_2 face icon_20"></i>
                        <i data-face="[黑线]" class="face_2 face icon_21"></i>
                        <i data-face="[阴险]" class="face_2 face icon_22"></i>
                        <i data-face="[互粉]" class="face_2 face icon_23"></i>
                        <i data-face="[心]" class="face_2 face icon_24"></i>
                        <i data-face="[伤心]" class="face_2 face icon_25"></i>
                        <i data-face="[猪头]" class="face_2 face icon_26"></i>
                        <i data-face="[熊猫]" class="face_2 face icon_27"></i>
                    </div>
                    <div class="swiper-slide">
                        <i data-face="[兔子]" class="face_3 face icon_0"></i>
                        <i data-face="[握手]" class="face_3 face icon_1"></i>
                        <i data-face="[作揖]" class="face_3 face icon_2"></i>
                        <i data-face="[赞]" class="face_3 face icon_3"></i>
                        <i data-face="[耶]" class="face_3 face icon_4"></i>
                        <i data-face="[good]" class="face_3 face icon_5"></i>
                        <i data-face="[弱]" class="face_3 face icon_6"></i>
                        <i data-face="[NO]" class="face_3 face icon_7"></i>
                        <i data-face="[ok]" class="face_3 face icon_8"></i>
                        <i data-face="[haha]" class="face_3 face icon_9"></i>
                        <i data-face="[来]" class="face_3 face icon_10"></i>
                        <i data-face="[威武]" class="face_3 face icon_11"></i>
                        <i data-face="[鲜花]" class="face_3 face icon_12"></i>
                        <i data-face="[钟]" class="face_3 face icon_13"></i>
                        <i data-face="[浮云]" class="face_3 face icon_14"></i>
                        <i data-face="[飞机]" class="face_3 face icon_15"></i>
                        <i data-face="[月亮]" class="face_3 face icon_16"></i>
                        <i data-face="[太阳]" class="face_3 face icon_17"></i>
                        <i data-face="[微风]" class="face_3 face icon_18"></i>
                        <i data-face="[下雨]" class="face_3 face icon_19"></i>
                        <i data-face="[给力]" class="face_3 face icon_20"></i>
                        <i data-face="[神马]" class="face_3 face icon_21"></i>
                        <i data-face="[围观]" class="face_3 face icon_22"></i>
                        <i data-face="[话筒]" class="face_3 face icon_23"></i>
                        <i data-face="[奥特曼]" class="face_3 face icon_24"></i>
                        <i data-face="[草泥马]" class="face_3 face icon_25"></i>
                        <i data-face="[萌]" class="face_3 face icon_26"></i>
                        <i data-face="[囧]" class="face_3 face icon_27"></i>
                    </div>
                    <div class="swiper-slide">
                        <i data-face="[织]" class="face_4 face icon_0"></i>
                        <i data-face="[礼物]" class="face_4 face icon_1"></i>
                        <i data-face="[喜]" class="face_4 face icon_2"></i>
                        <i data-face="[围脖]" class="face_4 face icon_3"></i>
                        <i data-face="[音乐]" class="face_4 face icon_4"></i>
                        <i data-face="[绿丝带]" class="face_4 face icon_5"></i>
                        <i data-face="[蛋糕]" class="face_4 face icon_6"></i>
                        <i data-face="[蜡烛]" class="face_4 face icon_7"></i>
                        <i data-face="[干杯]" class="face_4 face icon_8"></i>
                        <i data-face="[男孩儿]" class="face_4 face icon_9"></i>
                        <i data-face="[女孩儿]" class="face_4 face icon_10"></i>
                        <i data-face="[肥皂]" class="face_4 face icon_11"></i>
                        <i data-face="[照相机]" class="face_4 face icon_12"></i>
                        <i data-face="[浪]" class="face_4 face icon_13"></i>
                        <i data-face="[沙尘暴]" class="face_4 face icon_14"></i>
                    </div>
                </div>
                <div class="swiper-pagination"></div>
                <div class="review-send">
                    <i class="icon-roundclosefill"></i>	
                    <span class="fr"><button class="face-send">发送</button></span>
                    </div>
            </div>
            
            <div class="flexbox footeradd pop-talk">
            	<div class="flexitem"><i class="outerline icon-shoujichongzhi bg-blue"></i><span>充值</span></div>
                <div class="flexitem"><i class="outerline icon-dache bg-green"></i><span>打车</span></div>
                <div class="flexitem"><i class="outerline icon-camerafill bg-red"></i><span>照片</span></div>
                <div class="flexitem"><i class="outerline icon-shoukuan bg-orange"></i><span>收款</span></div>
            </div>
            
         
        </footer>
	</div>

</body>
<script src="../js/zepto.min.js"></script>
<script src="../js/swiper.min.js"></script>
    <script>
        var swiping = false
        var scrolling = false
        var $body = $("body")

        var swiper = new Swiper('.swiper-container', {
            pagination: '.swiper-pagination',
            paginationClickable: true,
            onTransitionStart: function () {
                swiping = true
            },
            onTransitionEnd: function () {
                swiping = false
            }
        });

        $(function () {
            $(".icon-emojilight").on("tap", function () {
                $(".footeradd").removeClass("factive");
                $(this).toggleClass("icon-keyboardlight");
                $(".swiper-container").toggleClass("factive");
				
            })

            $(".icon-roundaddlight").on("tap", function () {
                $(".swiper-container").removeClass("factive");
                $(".footeradd").toggleClass("factive");
            })

            $(".face").on("tap", function () {
                if (!swiping) {
                    var facetxt = "";
                    facetxt += $(this).prop('outerHTML');
                    $(".talk-input").append(facetxt);

                    return false;
                }
            })

            $(".face-send").on("tap", function () {
                var talktext = '<li class="mytalk">' +
                                    '<div class="flexbox">' +
                                        '<div class="flexitem">' +
                                            '<div class="talk-content">' + $(".talk-input").html() + '</div>' +
                                        '</div>' +
                                        '<div class="line-media"><img src="../images/2.jpg"alt=""></div>' +
                                    '</div>' +
                                '</li>'

                $(".talklist").append(talktext);
                $(".talk-input").html("");
				$(".swiper-container").removeClass("factive");
			  $(".icon-emojilight").toggleClass("icon-keyboardlight");

                scrollBottom()
            })

            $(".talklist").on("tap", function () {
                $(".swiper-container").removeClass("factive")
            })
            
            $(".icon-roundclosefill").on("tap", function () {
                $(".swiper-container").removeClass("factive");
                $(".icon-emojilight").toggleClass("icon-keyboardlight");
            })
        
            function scrollBottom() {
                if(!scrolling) {
                    scrolling = true

                    var scrollHeight = $body[0].scrollHeight

                    // 需要滚动的高度
                    var height = scrollHeight - $body.scrollTop() - $(window).height()
                    var interval = 50   // 每90毫秒触发一次滚动
                    var delay = 300     // 500毫秒完成动画
                    var per = Math.floor(height / (delay / interval))   // 每次线性滚动多少像素

                    var timer = setInterval( function () {
                        if(height > 1) {
                            $body.scrollTop($body.scrollTop() + per)
                            height -= per
                        } else {
                            $body.scrollTop(scrollHeight)
                            scrolling = false
                            clearInterval(timer)
                        }
                    }, interval)
                }
            }

            $(".talk-input").on("tap", scrollBottom)
        })
    </script>
</html>